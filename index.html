<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interest Profit Calculator (Turkey)</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles to complement Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
            color: #f9fafb; /* text-gray-50 */
        }
        /* Custom scrollbar for the results table */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1f2937; /* bg-gray-800 */
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #4b5563; /* bg-gray-600 */
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* bg-gray-500 */
        }
        /* Lucide icons are replaced with inline SVGs for simplicity */
    </style>
</head>
<body class="p-4 sm:p-6 lg:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-blue-400">Interest Profit Calculator</h1>
            <p class="text-gray-400 mt-2">Model your investment growth with compound interest and Turkish withholding tax.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column: Controls & Summary -->
            <div class="lg:col-span-1 space-y-6">
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-semibold mb-4">Parameters</h2>
                    <div class="space-y-4">
                        <!-- Initial Capital Input -->
                        <div>
                            <label class="text-sm font-medium text-gray-400 flex items-center mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10H12V2z"/><path d="M12 12H2a10 10 0 0 0 10 10V12z"/><path d="M12 12a10 10 0 0 1 10 10H12V12z"/></svg>
                                <span class="ml-2">Initial Capital (TRY)</span>
                            </label>
                            <input type="number" id="initialCapital" value="100000" placeholder="e.g., 100000" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>
                        <!-- Yearly Rate Input -->
                        <div>
                            <label class="text-sm font-medium text-gray-400 flex items-center mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="4"/><polyline points="6 10 12 4 18 10"/></svg>
                                <span class="ml-2">Yearly Interest Rate (%)</span>
                            </label>
                            <input type="number" id="yearlyRate" value="45" placeholder="e.g., 45" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>
                        <!-- Payout Interval Input -->
                        <div>
                            <label class="text-sm font-medium text-gray-400 flex items-center mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                <span class="ml-2">Payout Interval (Days)</span>
                            </label>
                            <input type="number" id="payoutInterval" value="32" placeholder="e.g., 32" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>
                    </div>
                </div>

                <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-semibold mb-4">Summary (100 Payouts)</h2>
                    <div class="space-y-4">
                        <!-- Net Profit Card -->
                        <div class="bg-gray-800 p-4 rounded-lg flex items-center border border-gray-700">
                            <div class="p-3 rounded-full mr-4 bg-green-500/20">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Net Profit</p>
                                <p id="totalProfit" class="text-xl font-bold text-white">0.00 TRY</p>
                            </div>
                        </div>
                        <!-- Total Tax Card -->
                        <div class="bg-gray-800 p-4 rounded-lg flex items-center border border-gray-700">
                            <div class="p-3 rounded-full mr-4 bg-red-500/20">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Total Tax Paid</p>
                                <p id="totalTax" class="text-xl font-bold text-white">0.00 TRY</p>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="bg-gray-800 p-4 rounded-xl text-sm text-gray-400">
                    <h3 class="font-semibold text-white mb-2">Tax Calculation Note:</h3>
                    <p>The withholding tax (stopaj) is estimated based on the payout interval:</p>
                    <ul class="list-disc list-inside mt-2 space-y-1">
                        <li><span class="font-bold">17.5%</span> for intervals up to 6 months (182 days).</li>
                        <li><span class="font-bold">15%</span> for intervals between 6 months and 1 year.</li>
                        <li><span class="font-bold">10%</span> for intervals over 1 year.</li>
                    </ul>
                </div>
            </div>

            <!-- Right Column: Results Log -->
            <div class="lg:col-span-2 bg-gray-800 p-1 rounded-xl shadow-lg">
                <div class="h-[75vh] overflow-y-auto custom-scrollbar">
                    <table class="w-full text-left">
                        <thead class="sticky top-0 bg-gray-800 shadow-sm">
                            <tr>
                                <th class="p-4 text-sm font-semibold text-gray-300">Day</th>
                                <th class="p-4 text-sm font-semibold text-gray-300 text-right">Total Capital</th>
                                <th class="p-4 text-sm font-semibold text-gray-300 text-right">Period Profit</th>
                                <th class="p-4 text-sm font-semibold text-gray-300 text-right">Period Tax</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody" class="divide-y divide-gray-700">
                            <!-- JS will populate this section -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Element References ---
        const initialCapitalInput = document.getElementById('initialCapital');
        const yearlyRateInput = document.getElementById('yearlyRate');
        const payoutIntervalInput = document.getElementById('payoutInterval');
        const resultsTableBody = document.getElementById('resultsTableBody');
        const totalProfitEl = document.getElementById('totalProfit');
        const totalTaxEl = document.getElementById('totalTax');

        // --- Helper Functions ---
        /**
         * Determines the withholding tax rate based on the payout interval.
         * @param {number} intervalDays - The interest payout interval in days.
         * @returns {number} The tax rate as a percentage (e.g., 17.5 for 17.5%).
         */
        const getTaxRate = (intervalDays) => {
            if (intervalDays <= 182) { // Up to 6 months
                return 17.5;
            } else if (intervalDays <= 365) { // Up to 1 year
                return 15;
            } else { // Over 1 year
                return 10;
            }
        };

        /**
         * Formats a number into a currency string (TRY).
         * @param {number} amount - The number to format.
         * @returns {string} The formatted currency string.
         */
        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('tr-TR', { style: 'currency', currency: 'TRY' }).format(amount);
        };

        // --- Main Calculation Logic ---
        const calculateAndDisplayProfit = () => {
            const capital = parseFloat(initialCapitalInput.value);
            const rate = parseFloat(yearlyRateInput.value);
            const interval = parseInt(payoutIntervalInput.value, 10);

            // Clear previous results and handle invalid input
            resultsTableBody.innerHTML = '';
            totalProfitEl.textContent = formatCurrency(0);
            totalTaxEl.textContent = formatCurrency(0);

            if (isNaN(capital) || isNaN(rate) || isNaN(interval) || capital <= 0 || rate <= 0 || interval <= 0) {
                const row = `<tr><td colspan="4" class="text-center p-16 text-gray-500">Please enter valid numbers in all fields to see the calculation.</td></tr>`;
                resultsTableBody.innerHTML = row;
                return;
            }

            let currentCapital = capital;
            let cumulativeProfit = 0;
            let cumulativeTax = 0;
            const taxRate = getTaxRate(interval) / 100;
            let tableHTML = '';

            for (let i = 1; i <= 100; i++) {
                // Calculate interest for the current period
                const interestEarned = currentCapital * (rate / 100) * (interval / 365);
                
                // Calculate tax on the earned interest
                const taxPaid = interestEarned * taxRate;
                
                // Calculate net profit
                const netProfit = interestEarned - taxPaid;
                
                // Update cumulative totals
                cumulativeProfit += netProfit;
                cumulativeTax += taxPaid;
                
                // Update the capital for the next period (compounding)
                currentCapital += netProfit;

                // Create the HTML for the new table row
                tableHTML += `
                    <tr class="hover:bg-gray-700/50 transition-colors">
                        <td class="p-4 font-medium">${i * interval}</td>
                        <td class="p-4 text-right font-semibold text-blue-300">${formatCurrency(currentCapital)}</td>
                        <td class="p-4 text-right text-green-400">${formatCurrency(netProfit)}</td>
                        <td class="p-4 text-right text-red-400">${formatCurrency(taxPaid)}</td>
                    </tr>
                `;
            }

            // Update the DOM
            resultsTableBody.innerHTML = tableHTML;
            totalProfitEl.textContent = formatCurrency(cumulativeProfit);
            totalTaxEl.textContent = formatCurrency(cumulativeTax);
        };

        // --- Event Listeners ---
        // Recalculate whenever any input changes
        initialCapitalInput.addEventListener('input', calculateAndDisplayProfit);
        yearlyRateInput.addEventListener('input', calculateAndDisplayProfit);
        payoutIntervalInput.addEventListener('input', calculateAndDisplayProfit);

        // --- Initial Calculation ---
        // Run the calculation once on page load to show initial results
        window.addEventListener('load', calculateAndDisplayProfit);
    </script>

</body>
</html>
